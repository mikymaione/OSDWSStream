<!DOCTYPE html>
<html>

<head>
	<title>Streaming</title>
</head>

<body>

	<video id="monitor" autoplay></video>

	<script>
		function FullScreen(monitor)
		{
			//document.exitFullscreen();
			monitor.requestFullscreen();
		}

		function Start()
		{
			const mimeCodec = 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"';

			if (MediaSource.isTypeSupported(mimeCodec))
			{
				const uri = "ws://localhost:8888";

				let monitor = document.getElementById('monitor');

				let mediaSource = new MediaSource();
				monitor.src = URL.createObjectURL(mediaSource);

				let sourceBuffer = mediaSource.addSourceBuffer(mimeCodec);

				let socket = new WebSocket(uri);
				//socket.binaryType = 'arraybuffer';

				// Connection opened				
				socket.onopen = function (event)
				{
					debugger;
					socket.send('Hello Server!');
				};

				// Listen for messages				
				socket.onmessage = function (event)
				{
					debugger;
					console.log(event.data);
					//sourceBuffer.appendBuffer(event.data);
				};
			}
			else 
			{
				console.error("Unsupported media format");
			}
		}

		Start();
	</script>
</body>

</html>